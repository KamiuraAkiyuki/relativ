machine:
    timezone: Asia/Tokyo
    hosts:
        dev.relativ.com: 127.0.0.1
    ruby:
        version: 2.3.3
    java:
        version: openjdk7
dependencies:
    override:
        - bundle install:
            timeout: 180
database:
    # pre:
    #     - mv config/database.yml.ci config/database.yml
    override:
        - bundle exec rake db:create db:schema:load RAILS_ENV=test
        - bundle exec rake db:migrate RAILS_ENV=test
test:
    pre:
        - wget -O geckodriver-v0.13.0-linux64.tar.gz https://github.com/mozilla/geckodriver/releases/download/v0.13.0/geckodriver-v0.13.0-linux64.tar.gz
        - tar zxf geckodriver-v0.13.0-linux64.tar.gz
        - chmod 755 geckodriver
        - sudo cp geckodriver /usr/local/bin/
        - echo "-----start test-----"
    override:
        - bundle exec rspec spec/features/knowledge_spec.rb
    post:
        - echo "-----end test-----"